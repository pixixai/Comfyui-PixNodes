# 连接到 JSON 列表

**JSON 列表合并**节点用于将任意数量、任意类型的输入数据合并为一个标准的 JSON 列表。

该节点专为处理动态输入设计，配合前端扩展，当连接第一个端口时会自动创建后续端口，非常适合批量处理数据或构建复杂的 Prompt 列表。

## 功能特性

- **动态端口**：支持无限扩展的输入端口（AnyData_1, AnyData_2...）。
- **万能输入**：支持连接任何类型的节点输出（字符串、JSON、Tensor、数值等），内置类型欺骗机制绕过 ComfyUI 的类型检查。
- **智能解析 (Smart Unpack)**：
    - 如果输入是一个已经格式化的 JSON 字符串（例如 `'{"a": 1}'`），节点会自动将其还原为对象，而不是将其作为字符串再次转义。这避免了二次序列化导致的转义符地狱（`"{\"a\": 1}"`）。
- **安全序列化**：
    - 对于无法直接 JSON 化的对象（如 PyTorch Tensor），会自动转换为友好的描述字符串（例如 `Tensor(shape=[1, 512, 512, 3], dtype=float32)`），防止报错。

## 输入说明

- **AnyData_1** (动态):
    - 第一个输入端口。当你连接此端口后，节点会自动创建 `AnyData_2`，以此类推。
    - 支持连接任意数据类型。
    - 如果输入为 `null` 或未连接，该项会被自动忽略，不会进入最终列表。

## 输出说明

- **JsonList (JSON)**:
    - Python 原生列表对象（`List[Any]`）。
    - 适合传递给下游支持列表输入的节点进行进一步处理。

## 常见问题

**Q: 为什么输出里有反斜杠？**
A: 本节点已内置智能解析功能。如果仍然出现反斜杠，请检查上游节点输出的字符串是否本身就是被多次转义过的。通常情况下，本节点会输出干净的 JSON 结构。

**Q: 为什么输入是红色的（类型不匹配）？**
A: 节点使用了通配符机制，通常可以连接任何端口。如果遇到无法连接的情况，请确保你使用的 ComfyUI 是较新版本，且没有其他插件干扰基础类型检查。