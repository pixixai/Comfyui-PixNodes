# 连接到JSON对象

**JSON 对象合并**节点用于将任意数量、任意类型的输入数据合并为一个标准的 JSON 对象（字典）。

该节点专为处理动态输入设计，配合前端扩展，当连接第一个端口时会自动创建后续端口。它采用智能合并策略：如果是字典则合并属性，如果是其他值则作为字段添加。非常适合构建复杂的参数配置或聚合数据。

## 功能特性

- **动态端口**：支持无限扩展的输入端口（AnyData_1, AnyData_2...）。
- **万能输入**：支持连接任何类型的节点输出（字符串、JSON、Tensor、数值等），内置类型欺骗机制绕过 ComfyUI 的类型检查。
- **智能合并 (Smart Merge)**：
    - **字典展开**：如果输入是 JSON 对象（字典），其内容会被自动展开并合并到结果中（Key-Value Merge）。
    - **键值赋值**：如果输入是其他类型（如数字、字符串），它会被作为 Value 存入结果，Key 为输入端口的名称（如 `AnyData_1`）。
- **智能解析 (Smart Unpack)**：
    - 如果输入是一个已经格式化的 JSON 字符串（例如 `'{"model": "sdxl"}'`），节点会自动将其还原为对象并合并，而不是将其作为字符串处理。
- **安全序列化**：
    - 对于无法直接 JSON 化的对象（如 PyTorch Tensor），会自动转换为友好的描述字符串（例如 `Tensor(shape=[1, 512, 512, 3], dtype=float32)`），防止报错。

## 输入说明

- **AnyData_1** (动态):
    - 第一个输入端口。连接后自动创建后续端口。
    - **覆盖规则**：按端口序号（1, 2, 3...）顺序处理。如果后续输入的字典中包含与前面相同的 Key，**后面的值会覆盖前面的值**。
    - 如果输入为 `null` 或未连接，该项会被忽略。

## 输出说明
 
- **JsonObject (JSON)**:
    - Python 原生字典对象（`Dict[str, Any]`）。
    - 适合传递给下游支持字典输入的节点。

## 常见问题

**Q: 为什么我的输入被覆盖了？**
A: 本节点遵循“后进优先”原则。如果 `AnyData_1` 输入了 `{"a": 1}`，而 `AnyData_2` 输入了 `{"a": 2}`，最终结果中 `a` 的值将是 `2`。

**Q: 为什么输出里有反斜杠？**
A: 请检查上游节点输出的字符串是否本身就是被多次转义过的。通常情况下，本节点的智能解析会输出干净的 JSON 结构。

**Q: 为什么输入是红色的（类型不匹配）？**
A: 节点使用了通配符机制。如果遇到无法连接的情况，请确保 ComfyUI 版本较新且无其他插件干扰基础类型检查。