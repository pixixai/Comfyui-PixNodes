# JSON 列表同步合并

**JSON 列表同步合并 (Zip)** 是一个强大的数据处理节点，用于将多个来源的 JSON 数组（或列表）合并为一个复杂的对象数组。它常用于将分散的属性（如 ID 列表、类型列表、时长列表）组装成完整的结构化数据。

## 核心功能

1. **动态输入端口**：在文本框中输入每一行的名称，节点左侧会自动生成对应的输入端口。
2. **智能合并**：将多个数组按索引对齐，合并为一个包含多个对象的数组。
3. **对象自动展开**：如果输入的数据本身是对象列表，会自动提取对象内的属性进行合并，而不是将对象作为值嵌套。
4. **广播属性 (@)**：支持将某个输入端口的**第一个值**“广播”复制到结果数组的每一个对象中。

## 参数说明

### 输入 (Inputs)

- **merge_keys** (STRING, Multiline):
    - 定义要合并的键名列表，每行一个。
    - **普通模式**: 输入 `id`，则生成名为 `id` 的输入端口。对应数组的值将以 `id` 为键放入结果对象中。
    - **广播模式**: 输入 `@subject`，则生成名为 `@subject` 的输入端口。该端口输入的数组的**第一个值**会被提取出来，并以 `subject` 为键（去掉 `@`）添加到结果数组的**每一个**对象中。
    - **转义**: 如果你需要键名以 `@` 开头，请使用双 `@`，例如 `@@twitter` 会生成名为 `@twitter` 的键。如果`@`的数量是单数，比如输入`@@@`，就会把`@twitter`作为键名，添加到结果数组的**每一个**对象中。。

### 输出 (Outputs)

- **merged_json** (STRING):
    - 合并后的 JSON 。格式为对象数组 `[{}, {}, ...]`。

## 使用示例

### 场景 1：基础合并

**merge_keys 设置**:

```
id
type

```

**输入数据**:

- `id`: `[1, 2]`
- `type`: `["A", "B"]`

**输出结果**:

```
[
  { "id": 1, "type": "A" },
  { "id": 2, "type": "B" }
]

```

### 场景 2：对象展开 (Object Spread)

**merge_keys 设置**:

```
id
props

```

**输入数据**:

- `id`: `[1, 2]`
- `props`: `[ {"color": "red"}, {"color": "blue"} ]`

**输出结果** (注意 `props` 消失了，其内部的 `color` 被合并进来了):

```
[
  { "id": 1, "color": "red" },
  { "id": 2, "color": "blue" }
]

```

### 场景 3：广播属性 (Broadcast)

**merge_keys 设置**:

```
@main_char
scene_id

```

**输入数据**:

- `@main_char`: `["Batman"]` (只取第一个值)
- `scene_id`: `[101, 102, 103]`

**输出结果**:

```
[
  { "main_char": "Batman", "scene_id": 101 },
  { "main_char": "Batman", "scene_id": 102 },
  { "main_char": "Batman", "scene_id": 103 }
]

```