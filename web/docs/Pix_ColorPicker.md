# 拾色器节点

**Pix_ColorPicker** 是一个功能强大的自定义拾色器节点，旨在为 ComfyUI 工作流提供直观、灵活的颜色选择和转换功能。

## 🎨 核心功能

- **双模式支持**：支持 **RGB** 和 **HSV** 两种色彩模式，并在 UI 上实时双向同步。
- **可视化色轮**：提供高分辨率、抗锯齿的 HSV 色相环，支持鼠标拖拽选择。
- **屏幕吸管**：内置屏幕拾色器（EyeDropper），可直接吸取屏幕上任意位置的颜色（需浏览器支持）。
- **动态单接口输出**：通过下拉菜单选择输出格式，节点不仅会输出对应的数据，**输出端口的类型和名称也会实时改变**（例如变为 IMAGE、STRING、INT 等），完美适配各种下游节点。
- **双向同步**：
    - 调整 UI（色轮/明度条）-> 实时更新输出参数。
    - 修改节点参数（Widget）-> 实时反向更新 UI 显示。

## ⚙️ 输入参数 (Inputs)

| 参数名称 | 类型 | 描述 |
|---|---|---|
| **mode** | Combo | **模式选择**。<br>- `RGB`: 参数被解释为 Red, Green, Blue (0-255)。<br>- `HSV`: 参数被解释为 Hue (0-360), Saturation (0-100), Value (0-100)。 |
| **output_format** | Combo | **输出格式选择**。决定了输出端口的数据类型和内容（详见下文）。 |
| **red** | INT | **红色通道 / 色相 (Hue)**。<br>根据模式不同，范围为 0-255 或 0-360。 |
| **green** | INT | **绿色通道 / 饱和度 (Saturation)**。<br>根据模式不同，范围为 0-255 或 0-100。 |
| **blue** | INT | **蓝色通道 / 明度 (Value)**。<br>根据模式不同，范围为 0-255 或 0-100。 |

> 注意：虽然输入参数名为 red/green/blue，但在 HSV 模式下，它们会自动充当 H/S/V 的数据容器。前端 UI 会自动更新标签显示。

## 📤 输出接口 (Output)

该节点只有一个动态输出端口，根据 **`output_format`** 的选择，其名称、类型和数据内容会发生变化：

| 选择的格式 | 端口显示 | 数据类型 | 数据描述 |
|---|---|---|---|
| **Image (Tensor)** | **IMAGE** | `IMAGE` | **图像张量**。<br>形状 `[1, 1, 1, 3]` 的纯色图像。可直接连接到 Load Image 或 Mask 相关的节点。 |
| **RGB (List)** | **RGB** | `LIST` | **RGB 整数列表**。<br>格式：`[R, G, B]`，例如 `[255, 0, 0]`。 |
| **HSV (List)** | **HSV** | `LIST` | **HSV 浮点列表**。<br>格式：`[Hue, Saturation, Value]`。范围：H(0-360), S(0-100), V(0-100)。 |
| **Hex (String)** | **HEX** | `STRING` | **十六进制颜色码**。<br>格式：`#RRGGBB`，例如 `#FF0000`。 |
| **Decimal (Int)** | **INT** | `INT` | **十进制颜色值**。<br>将 Hex 转换为整数，计算公式：`(R << 16) + (G << 8) + B`。 |
| **Brightness (Float)** | **Brightness** | `FLOAT` | **明度值**。<br>颜色的明度 (Value)，范围 0.0 - 1.0。 |

## 🖱️ 交互操作指南

1. **选择颜色**：在色轮上点击或拖动鼠标选择色相（Hue）和饱和度（Saturation）。
2. **调整明度**：拖动底部的滑动条调整颜色的明暗（Value）。
3. **吸取颜色**：点击右上角的 **吸管图标 (🖊️)**，然后点击屏幕任意位置吸取颜色。
4. **输入 HEX**：点击左上角的 HEX 文字（如 `#FFFFFF`），可以直接键盘输入新的 HEX 值（支持 `#RRGGBB` 或 `#RGB`），回车或点击外部生效。
5. **切换显示模式**：双击色轮中心区域，可在 RGB 和 HSV 显示模式之间快速切换。

*文档更新日期: 2025-01-14*