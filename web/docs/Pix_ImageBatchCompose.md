# Image Batch Compose (PixNodes)

此节点用于将**动态输入**的多个图像合并为一个标准化的图像批次（Image Batch）。它结合了动态插槽的灵活性与强大的尺寸对齐功能。

## 核心特性

- **动态输入**: 默认提供 `image_1`，当你连接它时，会自动出现 `image_2`，依此类推。支持连接任意数量的图像。
- **尺寸归一**: 将所有输入图像统一调整为指定的 **目标尺寸**。
- **混合对齐**: 提供多种缩放模式（适应、填充、拉伸）和对齐方位控制。

## 参数说明

### 输入 (Inputs)

- **mode (缩放模式)**:
    - `Fill` (默认): 图像按比例缩放以**填满**目标尺寸，超出部分会被裁切。
    - `Fit`: 图像按比例缩放以**完整显示**在目标尺寸内，不足部分填充背景色。
    - `Stretch`: 图像被**强制拉伸**至目标尺寸（可能会变形）。
- **alignment (对齐方式)**:
    - 决定图像在画布上的位置。
    - 在 `Fill` 模式下，决定裁切的重心（例如 `Top` 表示保留顶部内容，裁切底部）。
    - 在 `Fit` 模式下，决定图像摆放的位置（例如 `Center` 表示居中放置）。
- **background_color (背景颜色)**:
    - **类型**: `STRING` (参数输入)。
    - **默认值**: `#FFFFFF` (白色)。
    - 用于 `Fit` 模式下的空白区域填充。
    - **支持的格式**（解析优先级如下）：
        1. **列表/数组**: 如 `[255, 0, 0]` (RGB红) 或 `[0.5, 1.0, 1.0]` (HSV)。支持 AST 字符串格式 `"[255, 0, 0]"`。
        2. **RGB 字符串**: 如 `rgb(255, 0, 0)`, `255,128,0`。
        3. **Hex 十六进制**:
            - 标准: `#FF0000`
            - 无前缀: `FF0000`
            - 纯数字特例: `888888` (视为灰色 Hex)
            - 8位: `#FF000080` (自动丢弃透明度)
        4. **十进制整数**: 如 `16711680` (红色值)。
- **size (目标尺寸)**:
    - 格式示例: `1920x1080` (宽x高) 或 `512` (宽高均为512)。
    - **默认行为**: 如果留空，则自动以**第一张输入图像 (image_1)** 的尺寸作为基准，将后续所有图片对齐到该尺寸。

### 动态输入 (Optional)

- **image_1, image_2, ...**:
    - 动态生成的图像输入接口。
    - 只有连接了前一个接口（如 `image_1`），下一个接口（`image_2`）才会显示。
    - 节点会自动收集所有连接的图像进行批次合并。

### 输出 (Outputs)

- **image_batch**: 合并后的图像批次 `[B, H, W, C]`，可直接连接到预览节点或 VAE 编码节点。

## 使用技巧

1. **制作长图/拼接图**: 虽然这是一个 Batch 节点，但通过配合 "Grid Image" 或类似的布局节点，可以方便地将多张图拼合。
2. **统一素材尺寸**: 在进行 ControlNet 批处理或 IPAdapter 风格迁移前，使用此节点将不同来源、不同尺寸的素材统一为一个 Batch，可以避免报错。