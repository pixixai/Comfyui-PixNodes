# JSON切片工具

**JSON Slicer** 是一个用于 ComfyUI 的轻量级 JSON 数据处理节点，专注于对 JSON 列表或字典进行切片（Slice）和分块（Chunk）操作。

它非常适合用于批处理工作流，例如将大量的 Prompt 列表分批次发送给后续节点，或者从生成的元数据中提取特定范围的数据。

## ✨ 核心特性

- **双模式支持**：提供 `Chunk`（分块）和 `Range`（范围）两种切分逻辑。
- **任意类型输入**：支持 JSON 字符串、Python 列表（List）、Python 字典（Dict）等多种格式。
- **智能结构识别**：
    - **处理列表**：直接对列表 `[A, B, C...]` 进行切分。
    - **处理字典**：直接对对象 `{k1:v1, k2:v2...}` 的键值对进行切分。
- **多格式输出**：同时提供字符串格式和原始数据对象格式，满足不同节点连接需求。

## ⚙️ 参数说明

### 输入 (Inputs)

- **json_data** (AnyType)
**名称：JSON数据**
输入数据。支持 JSON 格式的字符串，也支持 Python 列表或字典对象。
- **mode** (COMBO)
选择切分模式：
    - `chunk`: 分块模式
    - `range`: 范围模式
- **length** (INT)
    - **Chunk模式下**：表示每个块包含的元素数量（分块大小）。
    - **Range模式下**：表示要截取的元素长度。
- **index** (INT)
    - **Chunk模式下**：表示获取第几个块（从 0 开始）。
    - **Range模式下**：表示截取的起始索引位置。

### 输出 (Outputs)

- **json_data_str** (STRING)
**名称：JSON字符串**
处理后的数据，已序列化为 JSON 字符串格式（保持缩进）。
- **json_data** (AnyType)
**名称：JSON数据**
处理后的原始 Python 数据（如 List 或 Dict）。适合连接到那些需要原始列表或对象的节点。
- **count** (INT)
**名称：总数**
    - **Chunk模式下**：输出总共可以分多少组（可用于循环终止条件）。
    - **Range模式下**：输出原始数据的总元素数量。
- **index** (INT)
**名称：索引（当前索引）**
当前使用的索引值（即输入的 `index` 参数值）。

## 📖 使用示例

假设输入 JSON 为：

```
["A", "B", "C", "D", "E"]

```

### 场景 1：分块处理 (Chunk Mode)

- **设置**：`mode = chunk`, `length = 2`, `index = 0`
- **输出 (json_data_str)**：`["A", "B"]`
- **输出 (count)**：3 (总共 3 组)

### 场景 2：范围截取 (Range Mode)

- **设置**：`mode = range`, `length = 3`, `index = 1`
- **输出 (json_data_str)**：`["B", "C", "D"]` (从索引 1 开始取 3 个)
- **输出 (count)**：5 (原始数组总长度)

